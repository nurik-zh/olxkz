# Используем официальный образ Go
FROM golang:1.23

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем go.mod и go.sum
COPY go.mod go.sum ./

# Загружаем зависимости
RUN go mod tidy

# Копируем весь исходный код
COPY . .

# Переходим в каталог с точкой входа и собираем приложение
WORKDIR /app/cmd
RUN go build -o app .

# Открываем порт, если у тебя например 8080
EXPOSE 8080

# Запускаем приложение
CMD ["./app"]
